#!/usr/bin/env python3

# just check that the program has two lines of output and they are both
# floating point numbers. The Chapel and C versions use two different random
# algorithms to init their data and have different sized arrays, so we can't
# compare the output directly.

import sys

filename = sys.argv[2]

lines = []
output = []
with open(filename, "r") as f:
    lines = f.readlines()

if len(lines) != 2:
    output.append(
        "ERROR: expected 2 lines of output, got {}".format(len(lines))
    )

for line in lines:
    try:
        float(line)
    except ValueError:
        output.append(
            "ERROR: expected floating point number, got '{}'".format(line)
        )

with open(filename, "w") as f:
    if len(output) == 0:
        f.write("PASS\n")
    else:
        for line in output:
            f.write(line + "\n")
