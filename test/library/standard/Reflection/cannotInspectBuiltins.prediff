#!/bin/sh 

# filter out line numbers
TESTNAME=$1
OUTFILE=$2
TMPFILE=$OUTFILE.prediff.tmp

sed -E 's/^.+\.chpl:[0-9]*:/FILE.chpl:n:/' < $OUTFILE > $TMPFILE
mv $TMPFILE $OUTFILE

sed -E 's/error: .+ is not a class, record, or union type/error: testType is not a class, record, or union type/' < $OUTFILE > $TMPFILE
mv $TMPFILE $OUTFILE

grep -v ' In function ' < $OUTFILE > $TMPFILE
mv $TMPFILE $OUTFILE

grep -v ' called as ' < $OUTFILE > $TMPFILE
mv $TMPFILE $OUTFILE
