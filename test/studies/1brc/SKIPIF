#!/usr/bin/env bash

set -x

if [[ ! -e create_measurements.py ]]; then
  wget https://raw.githubusercontent.com/gunnarmorling/1brc/00a309e5c7e0b99907627014bfce53435e3c4c99/src/main/python/create_measurements.py
  sed -i.bak 's:\.\./\.\./\.\./data/weather_stations\.csv:weather_stations\.csv:' create_measurements.py
  sed -i.bak 's:\.\./\.\./\.\./data/measurements\.txt:measurements\.txt:' create_measurements.py
fi

if [[ ! -e weather_stations.csv ]]; then
  wget https://raw.githubusercontent.com/gunnarmorling/1brc/00a309e5c7e0b99907627014bfce53435e3c4c99/data/weather_stations.csv
fi

if [[ ! -e measurements.txt ]]; then
  python ./create_measurements.py 10_000_000
fi
