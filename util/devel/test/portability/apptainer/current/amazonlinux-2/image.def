BootStrap: docker
From: amazonlinux:2


%files
    ../../provision-scripts/* /provision-scripts/

%post
    /provision-scripts/yum-deps-amazonlinux-2.sh
    # AL2 provides LLVM 11 (only) and GCC 7.3 (by default), both of which are
    # too old for us.
    # Install and use GCC 10, which can be used to build bundled/none LLVM.
    yum -y install gcc10 gcc10-c++
    CC=gcc10-gcc
    CXX=gcc10-g++
    CHPL_HOST_CC=gcc10-gcc
    CHPL_HOST_CXX=gcc10-g++

%runscript
    ../../provision-scripts/run.sh "$@"
